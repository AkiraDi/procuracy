<include file="Public/header" />
<style>
    tr{height:50px;}	
    .memtitel{
        width: 90px;
        line-height: 2
    }
    input{
        margin-left: 2px;
    }
</style>		
<body style="background-color:white;padding:15px;font-size:16px">
    <form method="post" action="__GROUP__/CaseInput/handAddCaseHandler" >
        <div class="page-header">
            <h1>案件详情</h1>
        </div><!-- /.page-header -->
        <table width="100%" border="0" cellpadding="2" cellspacing="0">
                        <tr>
                            <td>
                                <label><span style='color:red;'>*</span>检察院名称：</label>
                                <select class="chosen-select" id="selectCourt1" data-placeholder="检察院名称..."  name="P_CourtIn" style="width:200px;">
                                    <option value="">  </option>
                                    <volist name="courts" id="vo">
                                        <option value={$vo.C_ID}>{$vo.C_Name}</option>
                                    </volist>																					
                                </select>
                            </td>
                            <td>
                                <label><span style='color:red;'>*</span>听证室名称：</label>
                                <select class="chosen-select" id="selectCourtRoom" data-placeholder="听证室名称..." name="P_CourtRoomIn" style="width:200px;">
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td><label><span style='color:red;'>*</span>开始时间：</label><input type="text" name="P_StartTime" style="width:300px" autocomplete="off" onfocus="WdatePicker({skin: 'whyGreen', dateFmt: 'yyyy-M-d H:mm:ss'})" required="required"></td>
                            <td><label><span style='color:red;'>*</span>结束时间：</label><input type="text" name="P_EndTime" style="width:300px" autocomplete="off" onfocus="WdatePicker({skin: 'whyGreen', dateFmt: 'yyyy-M-d H:mm:ss'})" required="required"></td>
                        </tr>
                        <tr>
                            <td><label><span style='color:red;'>*</span>案件名称：</label><input type="text" name="P_CaseName" style="width:200px" autocomplete="off" value="{$_GET['case_no']}" required="required"></td>
                            <td><label><span style='color:red;'>*</span>听证类型：</label>
                                <select class="chosen-select" data-placeholder="检察院名称..."  name="P_CourtNo" style="width:200px;">
                                    <option value="1"> 刑事申诉案件听证会 </option>		
                                    <option value="2"> 民事诉讼监督案件听证会 </option>		
                                    <option value="3"> 行政诉讼监督案件听证会 </option>						
                                    <option value="4"> 行政公益诉讼案件听证会 </option>	   
                                    <option value="5"> 民事公益诉讼案件听证会 </option>		
                                    <option value="6"> 审查逮捕案件听证会 </option>		
                                    <option value="7"> 拟不起诉案件听证会 </option>						
                                    <option value="8"> 羁押必要性审查案件听证会 </option>	   
                                    <option value="9"> 未成年人刑事案件听证会 </option>	
                                    <option value="10"> 其他案件听证会 </option>													
                                                                                                            
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3"><label><span style='color:red;'>*</span>案件简介：</label><textarea class="form-control" id="form-field-8" rows="3" name="P_CaseDetail" required="required"></textarea></td>
                        </tr>
                        <tr>
                            
                            <td><label><span style='color:red;'>*</span>案件类别：</label>
                                <select class="chosen-select" data-placeholder="检察院名称..."  name="P_Catagory" style="width:200px;">
                                    <option value="刑事案件"> 刑事案件 </option>		
                                    <option value="民事案件"> 民事案件 </option>		
                                    <option value="行政案件"> 行政案件 </option>						
                                    <option value="公益诉讼"> 公益诉讼 </option>	   
                                    <option value="其他案件"> 其他案件 </option>													
                                                                                                            
                                </select>
                            
                            </td>
                            
                            <td><label>案件延时分钟数：</label>
                                <select class="chosen-select"data-placeholder="分钟数..."  name="P_DelayMin" style="width:200px;">
                                    <option value="0" check> 0分钟 </option>
                                    <option value="5"> 5分钟 </option>		
                                    <option value="10"> 10分钟 </option>		
                                    <option value="15"> 15分钟 </option>																		
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td><label><span style='color:red;'>*</span>承办部门：</label><input type="text" name="P_Department" style="width:200px"required="required"></td>
                            <td><label><span style='color:red;'>*</span>承办人：</label><input type="text" name="P_Contractor" style="width:200px" required="required"></td>
                        </tr>
            <tr>
                <td id = 'member'colspan="3"><label><span style='color:red;'>*</span>参与人：</label><br/>
                    <!--<input type="button" onclick="addtr();" id="add" value="添加检察人员"/><br/>-->
                    <div id ="procurator">
                        <label class="memtitel">检察官：</label><input type="text" name="procurator[]" value="" placeholder="姓名">
                        <span class="addName"><i class="ace-icon fa fa-plus-circle"></i></span>
                        <span class="cutName"><i class="ace-icon fa fa-minus-circle"></i></span>
                    </div>
                    <div id ="hostprocurator">
                        <label class="memtitel">主办检察官：</label><input type="text" name="hostprocurator[]" value="" placeholder="姓名">
                        <span class="addName"><i class="ace-icon fa fa-plus-circle"></i></span>
                        <span class="cutName"><i class="ace-icon fa fa-minus-circle"></i></span>
                    </div>
                    <div id ="procuratoraid">
                        <label class="memtitel">检察官助理：</label><input type="text" name="procuratoraid[]" value="" placeholder="姓名">
                        <span class="addName"><i class="ace-icon fa fa-plus-circle"></i></span>
                        <span class="cutName"><i class="ace-icon fa fa-minus-circle"></i></span>
                    </div>
                    <div id ="clerk">
                        <label class="memtitel">书记员：</label><input type="text" name="clerk[]" value="" placeholder="姓名">
                        <span class="addName"><i class="ace-icon fa fa-plus-circle"></i></span>
                        <span class="cutName"><i class="ace-icon fa fa-minus-circle"></i></span>
                    </div>
                    <div id ="party">
                        <label class="memtitel">案件当事人：</label><input type="text" name="party[]" value="" placeholder="姓名">
                        <span class="addName"><i class="ace-icon fa fa-plus-circle"></i></span>
                        <span class="cutName"><i class="ace-icon fa fa-minus-circle"></i></span>
                    </div>
                    <div id ="hear">
                        <label class="memtitel">听证员：</label><input type="text" name="hear[]" value="" placeholder="姓名">
                        <span class="addName"><i class="ace-icon fa fa-plus-circle"></i></span>
                        <span class="cutName"><i class="ace-icon fa fa-minus-circle"></i></span>
                    </div>
                    <div id ="sit">
                        <label class="memtitel">旁听人员：</label><input type="text" name="sit[]" value="" placeholder="姓名">
                        <span class="addName"><i class="ace-icon fa fa-plus-circle"></i></span>
                        <span class="cutName"><i class="ace-icon fa fa-minus-circle"></i></span>
                    </div>
                    <div id ="police">
                        <label class="memtitel">司法警察：</label><input type="text" name="police[]" value="" placeholder="姓名">
                        <span class="addName"><i class="ace-icon fa fa-plus-circle"></i></span>
                        <span class="cutName"><i class="ace-icon fa fa-minus-circle"></i></span>
                    </div>
                </td>
            </tr>
            <tr style="height:90px">
                <td colspan="1"></td>
                <td colspan="1"><button class="btn btn-info" type="submit"><i class="ace-icon fa fa-check bigger-110"></i>保存</button></td>
            </tr>
        </table>
        <br>
        <!--        <input type="hidden" name="P_OutPID"  id="PID2" value="" />
                <input type="hidden" name="P_Decoder"  id="Decoder2" value="" />-->
    </form>

    <script src="__PUBLIC__/js/jquery.min.js"></script>
    <script src="__PUBLIC__/js/chosen.jquery.min.js"></script>
    <script src="__PUBLIC__/My97DatePicker/WdatePicker.js"></script>
    <script type="text/javascript">
        jQuery(function($) {
            //清空检察院
            $('#selectCourt1').prop('selectedIndex', 0);
            //选择入流检察院时，查询该检察院所有的听证室，填入听证室select
            $('#selectCourt1').change(function() {
                $("#selectCourtRoom").chosen("destroy");
                var courtId = $(this).val();
                $.ajax({
                    url: '/index.php/ApplyTask/searchCourtRoom?C_ID=' + courtId,
                    dataType: 'json',
                    type: 'GET',
                    async: false,
                    success: function(msg) {
                        //删除所有option
                        $("#selectCourtRoom  option").remove();
                        $("#selectCourtRoom").append("<option value=''>  </option>");
                        for (i = 0; i < msg.data.length; i++) {
                            //循环插入option
                            $("#selectCourtRoom").append("<option value='" + msg.data[i].CR_ID + "'>[" + msg.data[i].CR_Name + "]</option>");
                        }
                    }
                });
                $("#selectCourtRoom").chosen();
            });

            //选择出流检察院时，查询PID
            $('#selectCourt2').change(function() {
                var L_ID = $(this).val();
                $.ajax({
                    url: '/index.php/ApplyTask/searchOutPID?L_ID=' + L_ID,
                    dataType: 'json',
                    type: 'GET',
                    async: false,
                    success: function(msg) {
                        $("#PID1,#PID2").val(msg.data.L_PID);
                        $("#P_CourtOut").val(msg.data.L_CourtName);
                        $("#Decoder1,#Decoder2").val(msg.data.L_Decoder);
                    }
                });
            });

            $('.chosen-select').chosen();

            $(".addName").on("click", function() {
                var id = $(this).parent().attr('id');
                var html = '<input type="text" name="' + id + '[]" value="" placeholder="姓名">'
                $(this).before(html);
            });
            
            $(".cutName").on("click", function() {
                $(this).prev().prev().remove();
            });
        });
    </script>
</body>
</html>